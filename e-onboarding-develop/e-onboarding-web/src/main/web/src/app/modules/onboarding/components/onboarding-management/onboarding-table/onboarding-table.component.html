<div class='tool'>
    <span class='button-container'>
        <button mat-raised-button (click)='addAssociate()' color='primary'>
            {{'onboarding.onboarding-table.add' | translate}}
        </button>

        <button class='stroked-blue-button' mat-stroked-button (click)='deleteSelectedAssociate()' color='primary'>
            {{'onboarding.onboarding-table.delete' | translate}}
        </button>
    </span>

    <span class='horizontal-spacer'></span>

    <span class='button-container'>
        <button mat-raised-button (click)='importFile()' color='primary'>
            {{'onboarding.onboarding-table.import' | translate}}
        </button>

        <button class='search' mat-stroked-button disableRipple>
            <mat-icon>search</mat-icon>

            <span class='search-input'>
                <input matInput (keyup)='applyFilter($event.target.value)'
                    [placeholder]='"onboarding.onboarding-table.search" | translate'>
            </span>
        </button>
    </span>
</div>

<!-- Table container -->
<div class='table-container'>
    <div class='table-overlay mat-elevation-z4'>
        <table class='table' mat-table matSort [dataSource]='dataSource'>
            <!-- Selection checkbox column -->
            <ng-container matColumnDef='select'>
                <th class='checkbox' mat-header-cell *matHeaderCellDef>
                    <mat-checkbox (change)='$event ? masterToggle() : null'
                        [checked]='selection.hasValue() && isAllSelected()'
                        [indeterminate]='selection.hasValue() && !isAllSelected()' color='primary'>
                    </mat-checkbox>
                </th>

                <td class='checkbox' mat-cell *matCellDef='let row'>
                    <mat-checkbox (click)='$event.stopPropagation()' (change)='$event ? selection.toggle(row) : null'
                        [checked]='selection.isSelected(row)' color='primary'>
                    </mat-checkbox>
                </td>
            </ng-container>

            <!-- No. column -->
            <ng-container matColumnDef='no'>
                <th mat-header-cell *matHeaderCellDef>
                    {{ONBOARDING_COLS.NO | translate}}
                </th>
                <td mat-cell *matCellDef='let i = index'>
                    {{i + 1}}
                </td>
            </ng-container>

            <!-- Name column -->
            <ng-container matColumnDef='name'>
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    {{ONBOARDING_COLS.NAME | translate}}
                </th>
                <td mat-cell *matCellDef='let element'>
                    {{element.name}}
                </td>
            </ng-container>

            <!-- Group column -->
            <ng-container matColumnDef='group'>
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    {{ONBOARDING_COLS.GROUP | translate}}
                </th>
                <td mat-cell *matCellDef='let element'>
                    {{element.userGroup | translate}}
                </td>
            </ng-container>

            <!-- Prefix column -->
            <ng-container matColumnDef='prefix'>
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    {{ONBOARDING_COLS.PREFIX | translate}}
                </th>
                <td mat-cell *matCellDef='let element'>
                    {{element.prefix}}
                </td>
            </ng-container>

            <!-- Competence column -->
            <ng-container matColumnDef='competence'>
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    {{ONBOARDING_COLS.COMPETENCE | translate}}
                </th>
                <td mat-cell *matCellDef='let element'>
                    {{element.competence}}
                </td>
            </ng-container>

            <!-- E-mail column -->
            <ng-container matColumnDef='email'>
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    {{ONBOARDING_COLS.EMAIL | translate}}
                </th>
                <td mat-cell *matCellDef='let element'>
                    {{element.email}}
                </td>
            </ng-container>

            <!-- Phone column -->
            <ng-container matColumnDef='phone'>
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    {{ONBOARDING_COLS.PHONE | translate}}
                </th>
                <td mat-cell *matCellDef='let element'>
                    {{element.phone}}
                </td>
            </ng-container>

            <!-- Remark column -->
            <ng-container matColumnDef='remark'>
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    {{ONBOARDING_COLS.REMARK | translate}}
                </th>
                <td mat-cell *matCellDef='let element'>
                    {{element.remark}}
                </td>
            </ng-container>

            <!-- Joining date column -->
            <ng-container matColumnDef='joiningDate'>
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    {{ONBOARDING_COLS.JOINING_DATE | translate}}
                </th>
                <td mat-cell *matCellDef='let element'>
                    {{conversionService.convertFromMillisecondsToDate(element.joinDate)}}
                </td>
            </ng-container>

            <!-- Action column -->
            <ng-container matColumnDef='action'>
                <th mat-header-cell *matHeaderCellDef>
                    {{ONBOARDING_COLS.ACTION | translate}}
                </th>
                <td mat-cell *matCellDef='let element'>
                    <div class='action-cell'>
                        <button class='lock-button' mat-icon-button *ngIf='element.userAccount'
                            [matTooltip]='element.userAccount.activated ? (TOOLTIP.DISABLE_ACCOUNT | translate) : (TOOLTIP.ENABLE_ACCOUNT | translate)'
                            (click)='toggleUserAccount(element)'>
                            <mat-icon class='lock-open-icon' *ngIf='element.userAccount.activated'>
                                lock_open
                            </mat-icon>
                            <mat-icon class='lock-icon' *ngIf='!element.userAccount.activated'>
                                lock
                            </mat-icon>
                        </button>
                        <button class='edit-button' mat-icon-button [matTooltip]='TOOLTIP.EDIT_ASSOCIATE | translate'
                            (click)='editAssociate(element)' color='primary'>
                            <mat-icon>
                                edit
                            </mat-icon>
                        </button>
                        <button class='delete-button' mat-icon-button (click)='deleteAssociate(element)'
                            [matTooltip]='TOOLTIP.DELETE_ASSOCIATE | translate' color='warn'>
                            <mat-icon>
                                delete_outline
                            </mat-icon>
                        </button>
                    </div>
                </td>
            </ng-container>

            <!-- Define row -->
            <tr class='table-header' mat-header-row *matHeaderRowDef='displayedColumns'></tr>
            <tr class='table-row' mat-row *matRowDef='let row; columns: displayedColumns;'></tr>
        </table>
    </div>

    <!-- Paginator -->
    <div class='paginator mat-elevation-z4'>
        <mat-paginator class='default-paginator' [pageSizeOptions]='[10, 20, 30, 40, 100]' showFirstLastButtons>
        </mat-paginator>

        <app-custom-paginator *ngIf='dataSource' [dataSource]='dataSource' [paginator]='paginator'>
        </app-custom-paginator>
    </div>
</div>